# 1.4 算法分析

## 数学模型

我们用`~f(N)`表示所有随着 N 的增大除以 f(N) 的结果趋近于 1 的函数，用`g(N)~f(N)`表示`g(N)/f(N)`随着 N 的增大趋近于 1。则 f(N) 为 g(N) 的增长的**数量级**。

对于大多数程序，得到其运行时间的数学模型所需的步骤如下：

* 确定**输入模型***（自己的理解：输入的数据，重要的是数据规模）*，定义问题的规模；
* 识别**内循环**；
* 根据内循环中的操作确定**成本模型***（自己的理解：耗时间的操作）*；
* 对于给定的输入，判断这些操作的执行频率。

一般来说，我们希望为各种基础问题找到对数级别、线性级别或是线性对数级别（NlogN）的算法。

### 重要资料

p116.表1.4.5 算法中的常见函数／表1.4.6 算法分析中常用的近似函数

![屏幕快照 2017-10-18 15.44.01.png](http://upload-images.jianshu.io/upload_images/2702529-72f9b7c0bff489ff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 内存

### 对象

要知道一个对象所使用的内存量，需要将所有实例变量使用的内存与**对象本身的开销（一般是 16 字节）**相加。这些开销包括一个指向对象的类的引用、垃圾收集信息以及同步信息。另外，一般内存的使用都会被**填充为 8 字节（64 位计算机中的机器字）的倍数**。

### 链表

嵌套的非静态（内部）类，还需要额外的 8 字节（用于一个指向外部类的引用）。

### 数组

一个**原始数据类型**的数组一般需要 24 字节的头信息（16 字节的对象开销，*4 字节用于保存长度*以及 4 填充字节）再加上保存值所需的内存。

一个**对象**的数组就是一个对象的引用的数组。例如一个含有 N 个 Date 对象的数组需要使用 24 字节（数组开销）加上 8N 字节（所有引用）加上每个对象的 32 字节，共 (24 + 40N) 字节。

**二维数组**是一个数组的数组（每个数组都是一个对象）。例如一个 M * N 的 double 类型的二维数组需要使用 24 字节（数组的数组的开销）加上 8M 字节（所有元素数组的引用）加上 24M 字节（所有元素数组的开销）加上 8MN 字节（M 个长度为 N 的 double 类型的数组），总共（8MN + 32M + 24）~ 8MN 字节。

### 字符串

Java 中 String 的标准实现含有 4 个实例变量：一个指向字符数组的引用（8 字节）和 3 个 int 值（各 4 字节）。第一个 int 值描述的是字符数组中的偏移量，第二个 int 值是一个计数器（字符串的长度），第三个 int 值是一个散列值（在某些情况下节省一些计算）。因此，**每个 String 对象共会使用 40 字节**（16 字节表示对象，3 个 int 实例变量共 12 字节，加上数组引用的 8 字节和 4 个填充字节），这是除字符数组之外字符串所需的内存空间。

一个长度为 N 的 String 对象一般需要使用 40 字节（String 对象本身）加上（24 + 2N）字节（字符数组），总共（64 + 2N）字节。

调用`substring()`方法创建子字符串时，重用了相同的 value[] 数组，因此只会使用 40 字节的内存。即**一个子字符串所需的额外内存是一个常数，构造一个子字符串所需的时间也是常数**。